
<script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
<script src="https://raw.githack.com/jeromeetienne/AR.js/2.0.8/aframe/build/aframe-ar.js"></script>

<link rel="stylesheet" type="text/css" href="style.css" />

<style>
  .overlay {
    width: 100%;
    height: 100%;
    display: block;
    background: rgba(0, 0, 0, 0.85);
    z-index: 1000;
    position: absolute;
    top: 0;
    left: 0;
  }
</style>

<body style="margin : 0px; overflow: hidden;">
  <script>
    AFRAME.registerComponent("registerevents", {
//       init: function() {
//         var marker = this.el;

//         marker.addEventListener("markerFound", function() {
//           var markerId = marker.id;
//           console.log("markerFound", markerId);
//           if ((markerId = "marker_freeka")) {
//             freeka.play();
//           }

//           if ((markerId = "marker_musk")) {
//             musk.play();
//           }
//         });

//         marker.addEventListener("markerLost", function() {
//           var markerId = marker.id;
//           console.log("markerLost", markerId);
//           if ((markerId = "marker_freeka")) {
//             freeka.pause();
//           }

//           if ((markerId = "marker_musk")) {
//             musk.pause();
//           }
//         });
//       }
    });
  </script>

  <div class="overlay">
    <button>
      START
    </button>
  </div>

  <a-scene
    embedded
    arjs="debugUIEnabled: false; sourceType: webcam; detectionMode: mono_and_matrix; matrixCodeType: 3x3;"
  >
    <a-assets>
      <!-- Load video that is hosted on another server. See 'src' attribute: -->
      <video
        id="freeka"
        autoplay="true"
        loop="true"
        muted     
        src="https://arjs-cors-proxy.herokuapp.com/https://github.com/freekatet/FactInterview2020/blob/master/freeka.mp4?raw=true"
      ></video>
      <video
        id="musk"
        autoplay="true"
        loop="true"
        muted     
        src="https://cdn.glitch.com/698cb0a9-f46f-486b-8bff-67b6af7c045a%2Fframe-garbage.mp4?v=1599167539296"
      ></video>
    </a-assets>

    <!--     <a-marker preset="pattern" type="pattern" url="https://cdn.glitch.com/a36300fc-552c-4d35-bb4f-554caf2062ea%2Fpattern-marker-ual.patt?1523138934861"> -->
    <a-marker
      type="pattern"
      id="marker_freeka"
      url="https://cdn.glitch.com/698cb0a9-f46f-486b-8bff-67b6af7c045a%2Fpattern-Screen%20Shot%202020-09-03%20at%202.52.45%20PM.patt?v=1599159229269"
      registerevents
    >
      <a-entity scale="1 1 1" rotation="-90 0 0">
        <a-video play-on-scan src="#freeka"></a-video>
      </a-entity>
    </a-marker>

    <a-marker
      type="pattern"
      id="marker_musk"
      url="https://cdn.glitch.com/698cb0a9-f46f-486b-8bff-67b6af7c045a%2Fpattern-musk.patt?v=1599160485928"
      registerevents
    >
      <a-entity scale="1 1 1" rotation="-90 0 0">
        <a-video play-on-scan src="#musk"></a-video>
      </a-entity>
    </a-marker>

    <a-entity camera>
      <a-entity position="0 0 0"> </a-entity>
    </a-entity>
  </a-scene>

  <script>
    musk.play();
    freeka.play();
    const overlay = document.querySelector(".overlay");
    const startBtn = overlay.querySelector("button");
    console.log(startBtn);
    startBtn.addEventListener("click", function() {
      overlay.style.display = "none";
    });

    console.log("hi");
  </script>
</body>
